<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>Codeage - [FP101x] Validasi kartu kredit dengan Swift (Lab2)</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/id/feed.xml" />
    <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icon/favicon-16x16.png">
    <link rel="manifest" href="/icon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/icon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link href="/stylesheets/all.css" rel="stylesheet" />
  </head>
  <body>

    <div id="main" role="main">
      <nav>
  <h1 class="blog-title"><a href="/id/">Codeage</a></h1>
  <p class="blog-description">
    Pardon my ramblings about code and such
  </p>
  <div class="blog-lang">
    <a href="/blog/en/fp101x-swift.html">English</a> / <strong>Bahasa Indonesia</strong>
  </div>
</nav>


      <article>
        <h1>[FP101x] Validasi kartu kredit dengan Swift (Lab2)</h1>
        <p>Sekarang saya sedang mengambil kelas online <a href="https://www.edx.org/course/introduction-functional-programming-delftx-fp101x-0">TUDelft&rsquo;s &ldquo;FP101x - Intro to Functional Programming&rdquo;</a> di edX, dan ternyata seru juga. Postingan ini ditulis karena saya ingin berbagi solusi dari latihan-latihan dari kelas FP101x yang saya kerjakan ulang dengan Swift.  Bahkan sang pengajar kelas tersebut, <a href="https://twitter.com/headinthebox">Erik Meijer</a>, beberapa waktu lalu nge-tweet seperti ini :</p>

<div>
<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">At this point, <a href="https://twitter.com/SwiftLang">@SwiftLang</a> is probably a better, and more valuable, vehicle for learning functional programming than Haskell.</p>&mdash; Erik Meijer (@headinthebox) <a href="https://twitter.com/headinthebox/status/655407294969196544">October 17, 2015</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>

<p>Tapi karena sampai sekarang saya belum menemukan kode Swift di kelas FP101x, jadi saya tulis ulang kode haskell dari kelas FP101x ke Swift playground.</p>

<h3>Validasi ðŸ’³ - Lab2.swift</h3>

<p>Berikut kutipan dari latihan lab2.hs yang saya tulis kembali dengan Swift</p>
<div class="highlight swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></td><td class="code"><pre>
<span class="c1">// Helpers</span>
<span class="kd">public</span> <span class="kd">func</span> <span class="nf">eval</span><span class="p">(</span><span class="n">_</span> <span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">digits</span><span class="o">.</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">{</span> <span class="n">result</span><span class="p">,</span> <span class="n">digit</span> <span class="k">in</span>
        <span class="k">return</span> <span class="n">digit</span> <span class="o">+</span> <span class="p">(</span><span class="n">result</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">func</span> <span class="nf">evalRev</span><span class="p">(</span><span class="n">_</span> <span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">index</span> <span class="k">in</span> <span class="nf">stride</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="p">(</span><span class="n">digits</span><span class="o">.</span><span class="n">count</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nv">through</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">by</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">digits</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">result</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">Sequence</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">all</span><span class="p">(</span><span class="n">_</span> <span class="nv">validateElement</span><span class="p">:</span> <span class="p">(</span><span class="k">Self</span><span class="o">.</span><span class="kt">Iterator</span><span class="o">.</span><span class="kt">Element</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">self</span><span class="o">.</span><span class="nf">reduce</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span><span class="p">,</span> <span class="n">element</span> <span class="k">in</span>
            <span class="k">return</span> <span class="n">result</span> <span class="o">&amp;&amp;</span> <span class="nf">validateElement</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Ex. 0</span>
<span class="kd">func</span> <span class="nf">toDigits</span><span class="p">(</span><span class="nv">digit</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span> <span class="k">return</span> <span class="p">[]</span> <span class="p">}</span>

<span class="c1">// Ex. 1</span>
<span class="kd">func</span> <span class="nf">toDigitsRev</span><span class="p">(</span><span class="nv">digit</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span> <span class="k">return</span> <span class="p">[]</span> <span class="p">}</span>

<span class="c1">// Ex. 2</span>
<span class="kd">func</span> <span class="nf">doubleSecond</span><span class="p">(</span><span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span> <span class="k">return</span> <span class="p">[]</span> <span class="p">}</span>

<span class="c1">// Ex. 3</span>
<span class="kd">func</span> <span class="nf">sumDigits</span><span class="p">(</span><span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span> <span class="p">}</span>

<span class="c1">// Ex. 4</span>
<span class="kd">func</span> <span class="nf">isValid</span><span class="p">(</span><span class="nv">digit</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span> <span class="p">}</span>

<span class="c1">// Ex. 5</span>
<span class="kd">func</span> <span class="nf">numValid</span><span class="p">(</span><span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">digits</span><span class="o">.</span><span class="nf">filter</span><span class="p">(</span><span class="n">isValid</span><span class="p">)</span><span class="o">.</span><span class="n">count</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>

<p>Versi lengkapnya latihan ini bisa diunduh sebagai playground : <a href="/blog/2015-11-11-fp101x-swift/lab2.playground.zip">Lab2.playground</a>. Playground-nya sudah diformat sedemikian rupa dengan markdown, jadi lebih rapi aja gitu. Playground dibuat dengan Xcode 8.2.1 and Swift 3.0.</p>

<p><img title="Playground in Xcode" alt="playground" src="/blog/2015-11-11-fp101x-swift/playground.png" /></p>

<h3>Versi haskell</h3>

<p>Kalau tertarik untuk mengecek latihan aslinya dalam haskell, bisa dilihat di <a href="/blog/2015-11-11-fp101x-swift/lab2.hs">sini</a>.</p>

<h2>Pembaruan: Solusi 1.5 tahun kemudian!</h2>
<div class="highlight swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></td><td class="code"><pre><span class="c1">// Ex. 0</span>
<span class="kd">func</span> <span class="nf">toDigits</span><span class="p">(</span><span class="nv">digit</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span>
  <span class="k">if</span> <span class="k">case</span> <span class="mi">0</span><span class="o">..&lt;</span><span class="mi">10</span> <span class="o">=</span> <span class="n">digit</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">digit</span><span class="p">]</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">toDigits</span><span class="p">(</span><span class="n">digit</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">digit</span> <span class="o">%</span> <span class="mi">10</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Ex. 1</span>
<span class="kd">func</span> <span class="nf">toDigitsRev</span><span class="p">(</span><span class="nv">digit</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nf">toDigits</span><span class="p">(</span><span class="n">digit</span><span class="p">)</span><span class="o">.</span><span class="nf">reversed</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">// Ex. 2</span>
<span class="kd">func</span> <span class="nf">doubleSecond</span><span class="p">(</span><span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">isEven</span> <span class="p">:</span> <span class="p">(</span><span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span> <span class="k">in</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
  <span class="k">return</span> <span class="n">digits</span><span class="o">.</span><span class="nf">enumerated</span><span class="p">()</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">index</span><span class="p">,</span> <span class="n">x</span> <span class="k">in</span> <span class="nf">isEven</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">?</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">:</span> <span class="n">x</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Ex. 3</span>

<span class="c1">// Menambahkan fungsi bantuan untuk mempermudah mendapatkan head dan tail</span>
<span class="c1">// ref: http://chris.eidhof.nl/post/swift-tricks/</span>
<span class="kd">extension</span> <span class="kt">Array</span> <span class="p">{</span>
  <span class="kd">func</span> <span class="nf">match</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">head</span><span class="p">:</span> <span class="kt">Element</span><span class="p">,</span> <span class="nv">tail</span><span class="p">:</span> <span class="p">[</span><span class="kt">Element</span><span class="p">])?</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="o">!</span><span class="n">isEmpty</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
    <span class="nf">return</span> <span class="p">(</span> <span class="n">first</span><span class="o">!</span><span class="p">,</span> <span class="kt">Array</span><span class="p">(</span><span class="nf">dropFirst</span><span class="p">())</span> <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">sumDigits</span><span class="p">(</span><span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
  <span class="k">guard</span> <span class="nf">let</span> <span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">tail</span><span class="p">)</span> <span class="o">=</span> <span class="n">digits</span><span class="o">.</span><span class="nf">match</span><span class="p">()</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">0</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nf">toDigits</span><span class="p">(</span><span class="n">head</span><span class="p">)</span><span class="o">.</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">+</span><span class="p">)</span> <span class="o">+</span> <span class="nf">sumDigits</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Ex. 4</span>
<span class="kd">func</span> <span class="nf">isValid</span><span class="p">(</span><span class="nv">digit</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nf">sumDigits</span><span class="p">(</span><span class="nf">doubleSecond</span><span class="p">(</span><span class="nf">toDigitsRev</span><span class="p">(</span><span class="n">digit</span><span class="p">)))</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="c1">// Ex. 5</span>
<span class="kd">func</span> <span class="nf">numValid</span><span class="p">(</span><span class="nv">digits</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">digits</span><span class="o">.</span><span class="nf">filter</span><span class="p">(</span><span class="n">isValid</span><span class="p">)</span><span class="o">.</span><span class="n">count</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>

<p>Latihan yang sangat seru dan menantang! ðŸ’ª</p>

        <div class="metadata">
          <div class="date">Nov.11 2015</div>
              <a class="tag" href="/blog/tags/functional-programming.html">functional programming</a>
    <a class="tag" href="/blog/tags/swift.html">swift</a>
    <a class="tag" href="/blog/tags/haskell.html">haskell</a>

        </div>
      </article>
      
<div class="article-links">
  <div class="previous-link">
    <a href="/blog/id/swift-scripting.html">&larr; Skrip dengan Swift : Ekstraksi Berkas String</a>
  </div>

  <div class="next-link">
    <a href="/blog/id/how-to-name-your-notification.html">Cara Menamakan Kelas Notifikasi &rarr;</a>
  </div>

</div>


      <footer>
  <div class="footer-blog">
    <p>Saya Ikhsan dan ini adalah blog saya tentang pemikiran seputar koding. Hal-hal selain kodingan saya tulis di blog utama, <a href="http://ikhsan.me">Lifeage</a>. Kontak saya via Twitter <a href="http://twitter.com/ixnixnixn">@ixnixnixn</a> atau langsung saja email di <a href="mailto:ikhsan.assaat@gmail.com">ikhsan.assaat@gmail.com</a>.</p>
  </div>

  <div class="footer-links">
    <ul>
      <li><a href="/id/articles.html">Artikel</a></li>
      <li><a href="http://ikhsan.me">Lifeage</a></li>
      <li><a href="http://twitter.com/ixnixnixn">Twitter</a></li>
      <li><a href="http://github.com/ikhsan">Github</a></li>
    </ul>
  </div>

  <div class="copyright">
    <p>&copy; <a href="https://github.com/ikhsan/ikhsan.github.io">Codeage</a> 2009â€“2017</p>
  </div>
</footer>

    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12712252-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
